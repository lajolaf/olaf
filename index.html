<html lang="ja"><head>

<script class="injected-ffc2e83d85">
(function(){'use strict';function q(b){var c=0;return function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}}}function t(b){var c=typeof Symbol!="undefined"&&Symbol.iterator&&b[Symbol.iterator];if(c)return c.call(b);if(typeof b.length=="number")return{next:q(b)};throw Error(String(b)+" is not an iterable or ArrayLike");}var u=typeof Object.defineProperties=="function"?Object.defineProperty:function(b,c,g){if(b==Array.prototype||b==Object.prototype)return b;b[c]=g.value;return b};
function v(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var c=0;c<b.length;++c){var g=b[c];if(g&&g.Math==Math)return g}throw Error("Cannot find global object");}var w=v(this);function x(b,c){if(c)a:{var g=w;b=b.split(".");for(var h=0;h<b.length-1;h++){var l=b[h];if(!(l in g))break a;g=g[l]}b=b[b.length-1];h=g[b];c=c(h);c!=h&&c!=null&&u(g,b,{configurable:!0,writable:!0,value:c})}}
function y(){this.j=!1;this.g=null;this.u=void 0;this.h=1;this.v=this.l=0;this.i=null}function z(b){if(b.j)throw new TypeError("Generator is already running");b.j=!0}y.prototype.o=function(b){this.u=b};function A(b,c){b.i={I:c,J:!0};b.h=b.l||b.v}y.prototype.return=function(b){this.i={return:b};this.h=this.v};function B(b){this.g=new y;this.h=b}function E(b,c){z(b.g);var g=b.g.g;if(g)return F(b,"return"in g?g["return"]:function(h){return{value:h,done:!0}},c,b.g.return);b.g.return(c);return G(b)}
function F(b,c,g,h){try{var l=c.call(b.g.g,g);if(!(l instanceof Object))throw new TypeError("Iterator result "+l+" is not an object");if(!l.done)return b.g.j=!1,l;var m=l.value}catch(f){return b.g.g=null,A(b.g,f),G(b)}b.g.g=null;h.call(b.g,m);return G(b)}function G(b){for(;b.g.h;)try{var c=b.h(b.g);if(c)return b.g.j=!1,{value:c.value,done:!1}}catch(g){b.g.u=void 0,A(b.g,g)}b.g.j=!1;if(b.g.i){c=b.g.i;b.g.i=null;if(c.J)throw c.I;return{value:c.return,done:!0}}return{value:void 0,done:!0}}
function H(b){this.next=function(c){z(b.g);b.g.g?c=F(b,b.g.g.next,c,b.g.o):(b.g.o(c),c=G(b));return c};this.throw=function(c){z(b.g);b.g.g?c=F(b,b.g.g["throw"],c,b.g.o):(A(b.g,c),c=G(b));return c};this.return=function(c){return E(b,c)};this[Symbol.iterator]=function(){return this}}function I(b){function c(h){return b.next(h)}function g(h){return b.throw(h)}return new Promise(function(h,l){function m(f){f.done?h(f.value):Promise.resolve(f.value).then(c,g).then(m,l)}m(b.next())})}
x("Symbol",function(b){function c(m){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new g(h+(m||"")+"_"+l++,m)}function g(m,f){this.g=m;u(this,"description",{configurable:!0,writable:!0,value:f})}if(b)return b;g.prototype.toString=function(){return this.g};var h="jscomp_symbol_"+(Math.random()*1E9>>>0)+"_",l=0;return c});
x("Symbol.iterator",function(b){if(b)return b;b=Symbol("Symbol.iterator");u(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return J(q(this))}});return b});function J(b){b={next:b};b[Symbol.iterator]=function(){return this};return b}
x("Promise",function(b){function c(f){this.h=0;this.i=void 0;this.g=[];this.u=!1;var a=this.j();try{f(a.resolve,a.reject)}catch(d){a.reject(d)}}function g(){this.g=null}function h(f){return f instanceof c?f:new c(function(a){a(f)})}if(b)return b;g.prototype.h=function(f){if(this.g==null){this.g=[];var a=this;this.i(function(){a.l()})}this.g.push(f)};var l=w.setTimeout;g.prototype.i=function(f){l(f,0)};g.prototype.l=function(){for(;this.g&&this.g.length;){var f=this.g;this.g=[];for(var a=0;a<f.length;++a){var d=
f[a];f[a]=null;try{d()}catch(e){this.j(e)}}}this.g=null};g.prototype.j=function(f){this.i(function(){throw f;})};c.prototype.j=function(){function f(e){return function(k){d||(d=!0,e.call(a,k))}}var a=this,d=!1;return{resolve:f(this.D),reject:f(this.l)}};c.prototype.D=function(f){if(f===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof c)this.G(f);else{a:switch(typeof f){case "object":var a=f!=null;break a;case "function":a=!0;break a;default:a=!1}a?this.C(f):this.o(f)}};
c.prototype.C=function(f){var a=void 0;try{a=f.then}catch(d){this.l(d);return}typeof a=="function"?this.H(a,f):this.o(f)};c.prototype.l=function(f){this.v(2,f)};c.prototype.o=function(f){this.v(1,f)};c.prototype.v=function(f,a){if(this.h!=0)throw Error("Cannot settle("+f+", "+a+"): Promise already settled in state"+this.h);this.h=f;this.i=a;this.h===2&&this.F();this.K()};c.prototype.F=function(){var f=this;l(function(){if(f.B()){var a=w.console;typeof a!=="undefined"&&a.error(f.i)}},1)};c.prototype.B=
function(){if(this.u)return!1;var f=w.CustomEvent,a=w.Event,d=w.dispatchEvent;if(typeof d==="undefined")return!0;typeof f==="function"?f=new f("unhandledrejection",{cancelable:!0}):typeof a==="function"?f=new a("unhandledrejection",{cancelable:!0}):(f=w.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f));f.promise=this;f.reason=this.i;return d(f)};c.prototype.K=function(){if(this.g!=null){for(var f=0;f<this.g.length;++f)m.h(this.g[f]);this.g=null}};var m=new g;c.prototype.G=
function(f){var a=this.j();f.A(a.resolve,a.reject)};c.prototype.H=function(f,a){var d=this.j();try{f.call(a,d.resolve,d.reject)}catch(e){d.reject(e)}};c.prototype.then=function(f,a){function d(n,r){return typeof n=="function"?function(C){try{e(n(C))}catch(D){k(D)}}:r}var e,k,p=new c(function(n,r){e=n;k=r});this.A(d(f,e),d(a,k));return p};c.prototype.catch=function(f){return this.then(void 0,f)};c.prototype.A=function(f,a){function d(){switch(e.h){case 1:f(e.i);break;case 2:a(e.i);break;default:throw Error("Unexpected state: "+
e.h);}}var e=this;this.g==null?m.h(d):this.g.push(d);this.u=!0};c.resolve=h;c.reject=function(f){return new c(function(a,d){d(f)})};c.race=function(f){return new c(function(a,d){for(var e=t(f),k=e.next();!k.done;k=e.next())h(k.value).A(a,d)})};c.all=function(f){var a=t(f),d=a.next();return d.done?h([]):new c(function(e,k){function p(C){return function(D){n[C]=D;r--;r==0&&e(n)}}var n=[],r=0;do n.push(void 0),r++,h(d.value).A(p(n.length-1),k),d=a.next();while(!d.done)})};return c});
function K(b,c){return Object.prototype.hasOwnProperty.call(b,c)}x("Object.is",function(b){return b?b:function(c,g){return c===g?c!==0||1/c===1/g:c!==c&&g!==g}});x("Array.prototype.includes",function(b){return b?b:function(c,g){var h=this;h instanceof String&&(h=String(h));var l=h.length;g=g||0;for(g<0&&(g=Math.max(g+l,0));g<l;g++){var m=h[g];if(m===c||Object.is(m,c))return!0}return!1}});
x("String.prototype.includes",function(b){return b?b:function(c,g){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(c,g||0)!==-1}});
x("WeakMap",function(b){function c(d){this.g=(a+=Math.random()+1).toString();if(d){d=t(d);for(var e;!(e=d.next()).done;)e=e.value,this.set(e[0],e[1])}}function g(){}function h(d){var e=typeof d;return e==="object"&&d!==null||e==="function"}function l(d){if(!K(d,f)){var e=new g;u(d,f,{value:e})}}function m(d){var e=Object[d];e&&(Object[d]=function(k){if(k instanceof g)return k;Object.isExtensible(k)&&l(k);return e(k)})}if(function(){if(!b||!Object.seal)return!1;try{var d=Object.seal({}),e=Object.seal({}),
k=new b([[d,2],[e,3]]);if(k.get(d)!=2||k.get(e)!=3)return!1;k.delete(d);k.set(e,4);return!k.has(d)&&k.get(e)==4}catch(p){return!1}}())return b;var f="$jscomp_hidden_"+Math.random();m("freeze");m("preventExtensions");m("seal");var a=0;c.prototype.set=function(d,e){if(!h(d))throw Error("Invalid WeakMap key");l(d);if(!K(d,f))throw Error("WeakMap key fail: "+d);d[f][this.g]=e;return this};c.prototype.get=function(d){return h(d)&&K(d,f)?d[f][this.g]:void 0};c.prototype.has=function(d){return h(d)&&K(d,
f)&&K(d[f],this.g)};c.prototype.delete=function(d){return h(d)&&K(d,f)&&K(d[f],this.g)?delete d[f][this.g]:!1};return c});
x("Map",function(b){function c(){var a={};return a.m=a.next=a.head=a}function g(a,d){var e=a[1];return J(function(){if(e){for(;e.head!=a[1];)e=e.m;for(;e.next!=e.head;)return e=e.next,{done:!1,value:d(e)};e=null}return{done:!0,value:void 0}})}function h(a,d){var e=d&&typeof d;e=="object"||e=="function"?m.has(d)?e=m.get(d):(e=""+ ++f,m.set(d,e)):e="p_"+d;var k=a[0][e];if(k&&K(a[0],e))for(a=0;a<k.length;a++){var p=k[a];if(d!==d&&p.key!==p.key||d===p.key)return{id:e,list:k,index:a,entry:p}}return{id:e,
list:k,index:-1,entry:void 0}}function l(a){this[0]={};this[1]=c();this.size=0;if(a){a=t(a);for(var d;!(d=a.next()).done;)d=d.value,this.set(d[0],d[1])}}if(function(){if(!b||typeof b!="function"||!b.prototype.entries||typeof Object.seal!="function")return!1;try{var a=Object.seal({x:4}),d=new b(t([[a,"s"]]));if(d.get(a)!="s"||d.size!=1||d.get({x:4})||d.set({x:4},"t")!=d||d.size!=2)return!1;var e=d.entries(),k=e.next();if(k.done||k.value[0]!=a||k.value[1]!="s")return!1;k=e.next();return k.done||k.value[0].x!=
4||k.value[1]!="t"||!e.next().done?!1:!0}catch(p){return!1}}())return b;var m=new WeakMap;l.prototype.set=function(a,d){a=a===0?0:a;var e=h(this,a);e.list||(e.list=this[0][e.id]=[]);e.entry?e.entry.value=d:(e.entry={next:this[1],m:this[1].m,head:this[1],key:a,value:d},e.list.push(e.entry),this[1].m.next=e.entry,this[1].m=e.entry,this.size++);return this};l.prototype.delete=function(a){a=h(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this[0][a.id],a.entry.m.next=a.entry.next,
a.entry.next.m=a.entry.m,a.entry.head=null,this.size--,!0):!1};l.prototype.clear=function(){this[0]={};this[1]=this[1].m=c();this.size=0};l.prototype.has=function(a){return!!h(this,a).entry};l.prototype.get=function(a){return(a=h(this,a).entry)&&a.value};l.prototype.entries=function(){return g(this,function(a){return[a.key,a.value]})};l.prototype.keys=function(){return g(this,function(a){return a.key})};l.prototype.values=function(){return g(this,function(a){return a.value})};l.prototype.forEach=
function(a,d){for(var e=this.entries(),k;!(k=e.next()).done;)k=k.value,a.call(d,k[1],k[0],this)};l.prototype[Symbol.iterator]=l.prototype.entries;var f=0;return l});
x("Set",function(b){function c(g){this.g=new Map;if(g){g=t(g);for(var h;!(h=g.next()).done;)this.add(h.value)}this.size=this.g.size}if(function(){if(!b||typeof b!="function"||!b.prototype.entries||typeof Object.seal!="function")return!1;try{var g=Object.seal({x:4}),h=new b(t([g]));if(!h.has(g)||h.size!=1||h.add(g)!=h||h.size!=1||h.add({x:4})!=h||h.size!=2)return!1;var l=h.entries(),m=l.next();if(m.done||m.value[0]!=g||m.value[1]!=g)return!1;m=l.next();return m.done||m.value[0]==g||m.value[0].x!=4||
m.value[1]!=m.value[0]?!1:l.next().done}catch(f){return!1}}())return b;c.prototype.add=function(g){g=g===0?0:g;this.g.set(g,g);this.size=this.g.size;return this};c.prototype.delete=function(g){g=this.g.delete(g);this.size=this.g.size;return g};c.prototype.clear=function(){this.g.clear();this.size=0};c.prototype.has=function(g){return this.g.has(g)};c.prototype.entries=function(){return this.g.entries()};c.prototype.values=function(){return this.g.values()};c.prototype.keys=c.prototype.values;c.prototype[Symbol.iterator]=
c.prototype.values;c.prototype.forEach=function(g,h){var l=this;this.g.forEach(function(m){return g.call(h,m,m,l)})};return c});(function(){function b(){return m?Promise.resolve(m):f?f:f=fetch("https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json").then(function(a){if(!a.ok)throw Error("HTTP error! status: "+a.status+" fetching https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json");return a.json()}).then(function(a){if(!Array.isArray(a))throw new TypeError("Fetched icon names from https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json is not an array.");
return m=a}).catch(function(a){console.error("IconChecker: Failed to load valid icon names from https://www.gstatic.com/bard-maui/resources/material-design-icon-names.804824289.json.",a);f=null;throw a;})}function c(a){var d,e,k,p;return I(new H(new B(function(n){switch(n.h){case 1:d=(a.textContent||"").trim();if(!d||a.classList.contains("js-replaced-missing-icon")&&d==="radio_button_unchecked")return n.return();e=window.getComputedStyle(a);if(e.display==="none"||e.visibility==="hidden")return n.return();
n.l=2;var r=b();n.h=4;return{value:r};case 4:k=n.u;n.h=3;n.l=0;break;case 2:return n.l=0,n.i=null,console.warn('IconChecker: Skipping check for icon "'+d+'" as valid names could not be loaded.'),n.return();case 3:(p=k.includes(d))?a.classList.contains("js-replaced-missing-icon")&&a.classList.remove("js-replaced-missing-icon"):d==="radio_button_unchecked"&&a.classList.contains("js-replaced-missing-icon")||(a.textContent="radio_button_unchecked",a.classList.add("js-replaced-missing-icon")),n.h=0}})))}
function g(a){a=a===void 0?document.body:a;a.querySelectorAll(l).forEach(function(d){c(d)})}function h(){b().catch(function(){});document.fonts.ready.then(function(){requestAnimationFrame(function(){g(document.body);(new MutationObserver(function(a){var d=new Set;a=t(a);for(var e=a.next();!e.done;e=a.next())if(e=e.value,e.type==="childList")e.addedNodes.forEach(function(p){p.nodeType===Node.ELEMENT_NODE&&(p.matches(l)&&d.add(p),p.querySelectorAll(l).forEach(function(n){d.add(n)}))});else if(e.type===
"attributes"&&e.attributeName==="class"){var k=e.target;e.target.nodeType===Node.ELEMENT_NODE&&k.matches(l)&&d.add(k)}else e.type==="characterData"&&e.target.parentNode&&(e=e.target.parentNode,e.nodeType===Node.ELEMENT_NODE&&e.matches(l)&&d.add(e));d.size>0&&setTimeout(function(){d.forEach(function(p){c(p)})},500)})).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"],characterData:!0})})}).catch(function(a){console.error("IconChecker: Font loading error. Scanning icons anyway.",
a);requestAnimationFrame(function(){g(document.body)})})}var l=["material-icons","material-symbols-outlined","material-symbols-rounded","material-symbols-sharp"].map(function(a){return"."+a}).join(","),m=null,f=null;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){h()}):h()})();}).call(this);


</script>


<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
<title>TWICE SURVIVAL | Infinite Music Challenge</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Teko:wght@300;500;700&amp;family=Zen+Kaku+Gothic+New:wght@400;700;900&amp;display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,1,0" rel="stylesheet">
<script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'neon-pink': '#FF00FF',
                        'neon-blue': '#00FFFF',
                        'twice-dark': '#1a0b14',
                    },
                    fontFamily: {
                        'display': ['"Teko"', 'sans-serif'],
                        'body': ['"Zen Kaku Gothic New"', 'sans-serif'],
                    },
                    animation: {
                        'pulse-fast': 'pulse 0.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'shake': 'shake 0.5s cubic-bezier(.36,.07,.19,.97) both',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                    },
                    keyframes: {
                        shake: {
                            '10%, 90%': { transform: 'translate3d(-1px, 0, 0)' },
                            '20%, 80%': { transform: 'translate3d(2px, 0, 0)' },
                            '30%, 50%, 70%': { transform: 'translate3d(-4px, 0, 0)' },
                            '40%, 60%': { transform: 'translate3d(4px, 0, 0)' }
                        },
                        glow: {
                            'from': { boxShadow: '0 0 10px #FF00FF, 0 0 20px #FF00FF' },
                            'to': { boxShadow: '0 0 20px #00FFFF, 0 0 30px #00FFFF' }
                        }
                    }
                }
            }
        }
    </script>
<style>
        body {
            background-color: #050505;
            background-image: 
                radial-gradient(circle at 50% 50%, rgba(255, 0, 255, 0.1) 0%, transparent 50%),
                linear-gradient(0deg, rgba(0,0,0,0.8) 0%, transparent 100%);
            color: white;
            overflow: hidden;
            touch-action: manipulation;
        }
        
        .cyber-panel {
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid rgba(255, 0, 255, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.1);
            position: relative;
        }
        
        .cyber-panel::before {
            content: '';
            position: absolute;
            top: -1px; left: -1px; right: -1px; height: 2px;
            background: linear-gradient(90deg, transparent, #00FFFF, #FF00FF, transparent);
            z-index: 10;
        }

        .timer-bar {
            transition: width 0.1s linear;
        }

        /* Glitch effect for Game Over */
        .glitch {
            position: relative;
        }
        .glitch::before, .glitch::after {
            content: attr(data-text);
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
        }
        .glitch::before {
            left: 2px; text-shadow: -1px 0 #00ffff; clip: rect(24px, 550px, 90px, 0);
            animation: glitch-anim-2 3s infinite linear alternate-reverse;
        }
        .glitch::after {
            left: -2px; text-shadow: -1px 0 #ff00ff; clip: rect(85px, 550px, 140px, 0);
            animation: glitch-anim 2.5s infinite linear alternate-reverse;
        }
        @keyframes glitch-anim {
            0% { clip: rect(14px, 9999px, 122px, 0); }
            100% { clip: rect(54px, 9999px, 46px, 0); }
        }
        @keyframes glitch-anim-2 {
            0% { clip: rect(129px, 9999px, 36px, 0); }
            100% { clip: rect(6px, 9999px, 69px, 0); }
        }

        .visualizer-bar {
            width: 6px;
            background: linear-gradient(to top, #FF00FF, #00FFFF);
            border-radius: 4px;
            animation: equalizer 0.5s ease-in-out infinite;
        }
        @keyframes equalizer {
            0%, 100% { height: 20%; }
            50% { height: 100%; }
        }
    </style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.pointer-events-none{pointer-events:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0px}.bottom-1\/4{bottom:25%}.left-1\/4{left:25%}.right-1\/4{right:25%}.right-4{right:1rem}.top-1\/4{top:25%}.top-4{top:1rem}.z-0{z-index:0}.z-10{z-index:10}.z-20{z-index:20}.z-50{z-index:50}.m-4{margin:1rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-1{margin-bottom:0.25rem}.mb-2{margin-bottom:0.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.mb-8{margin-bottom:2rem}.mt-2{margin-top:0.5rem}.mt-4{margin-top:1rem}.flex{display:flex}.grid{display:grid}.hidden{display:none}.h-16{height:4rem}.h-2{height:0.5rem}.h-48{height:12rem}.h-64{height:16rem}.h-full{height:100%}.h-screen{height:100vh}.w-2{width:0.5rem}.w-48{width:12rem}.w-64{width:16rem}.w-full{width:100%}.w-screen{width:100vw}.max-w-lg{max-width:32rem}.max-w-sm{max-width:24rem}.flex-1{flex:1 1 0%}.scale-100{--tw-scale-x:1;--tw-scale-y:1;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-150{--tw-scale-x:1.5;--tw-scale-y:1.5;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-50{--tw-scale-x:.5;--tw-scale-y:.5;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes bounce{0%, 100%{transform:translateY(-25%);animation-timing-function:cubic-bezier(0.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,0.2,1)}}.animate-bounce{animation:bounce 1s infinite}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite}.cursor-pointer{cursor:pointer}.grid-cols-1{grid-template-columns:repeat(1, minmax(0, 1fr))}.flex-col{flex-direction:column}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:0.25rem}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.space-y-3 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-y-6 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.space-y-8 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(2rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(2rem * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.rounded{border-radius:0.25rem}.rounded-2xl{border-radius:1rem}.rounded-full{border-radius:9999px}.rounded-none{border-radius:0px}.border{border-width:1px}.border-4{border-width:4px}.border-b{border-bottom-width:1px}.border-t{border-top-width:1px}.border-neon-blue{--tw-border-opacity:1;border-color:rgb(0 255 255 / var(--tw-border-opacity, 1))}.border-white\/10{border-color:rgb(255 255 255 / 0.1)}.border-white\/20{border-color:rgb(255 255 255 / 0.2)}.bg-black\/50{background-color:rgb(0 0 0 / 0.5)}.bg-black\/80{background-color:rgb(0 0 0 / 0.8)}.bg-gray-800{--tw-bg-opacity:1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.bg-neon-blue{--tw-bg-opacity:1;background-color:rgb(0 255 255 / var(--tw-bg-opacity, 1))}.bg-neon-pink{--tw-bg-opacity:1;background-color:rgb(255 0 255 / var(--tw-bg-opacity, 1))}.bg-pink-900{--tw-bg-opacity:1;background-color:rgb(131 24 67 / var(--tw-bg-opacity, 1))}.bg-purple-900{--tw-bg-opacity:1;background-color:rgb(88 28 135 / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-gradient-to-r{background-image:linear-gradient(to right, var(--tw-gradient-stops))}.from-neon-blue{--tw-gradient-from:#00FFFF var(--tw-gradient-from-position);--tw-gradient-to:rgb(0 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-neon-blue\/20{--tw-gradient-from:rgb(0 255 255 / 0.2) var(--tw-gradient-from-position);--tw-gradient-to:rgb(0 255 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-neon-pink{--tw-gradient-from:#FF00FF var(--tw-gradient-from-position);--tw-gradient-to:rgb(255 0 255 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.to-neon-blue{--tw-gradient-to:#00FFFF var(--tw-gradient-to-position)}.to-neon-pink{--tw-gradient-to:#FF00FF var(--tw-gradient-to-position)}.to-purple-600{--tw-gradient-to:#9333ea var(--tw-gradient-to-position)}.to-transparent{--tw-gradient-to:transparent var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.p-2{padding:0.5rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-2{padding-left:0.5rem;padding-right:0.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-4{padding-top:1rem;padding-bottom:1rem}.pb-4{padding-bottom:1rem}.pb-8{padding-bottom:2rem}.pr-8{padding-right:2rem}.pt-2{padding-top:0.5rem}.pt-4{padding-top:1rem}.text-center{text-align:center}.text-right{text-align:right}.font-body{font-family:"Zen Kaku Gothic New", sans-serif}.font-display{font-family:"Teko", sans-serif}.font-mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-5xl{font-size:3rem;line-height:1}.text-6xl{font-size:3.75rem;line-height:1}.text-7xl{font-size:4.5rem;line-height:1}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.font-bold{font-weight:700}.italic{font-style:italic}.tracking-wider{letter-spacing:0.05em}.tracking-widest{letter-spacing:0.1em}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-neon-blue{--tw-text-opacity:1;color:rgb(0 255 255 / var(--tw-text-opacity, 1))}.text-neon-pink{--tw-text-opacity:1;color:rgb(255 0 255 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity:1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-transparent{color:transparent}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.opacity-0{opacity:0}.opacity-20{opacity:0.2}.opacity-30{opacity:0.3}.opacity-50{opacity:0.5}.shadow-\[0_0_10px_rgba\(255\2c 0\2c 255\2c 0\.3\)\]{--tw-shadow:0 0 10px rgba(255,0,255,0.3);--tw-shadow-colored:0 0 10px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.blur-\[100px\]{--tw-blur:blur(100px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.blur-xl{--tw-blur:blur(24px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.drop-shadow-\[0_0_10px_rgba\(0\2c 0\2c 0\2c 0\.8\)\]{--tw-drop-shadow:drop-shadow(0 0 10px rgba(0,0,0,0.8));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-md{--tw-backdrop-blur:blur(12px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-sm{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-200{transition-duration:200ms}.duration-300{transition-duration:300ms}.duration-500{transition-duration:500ms}.hover\:rotate-90:hover{--tw-rotate:90deg;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:bg-neon-blue\/10:hover{background-color:rgb(0 255 255 / 0.1)}.hover\:text-neon-pink:hover{--tw-text-opacity:1;color:rgb(255 0 255 / var(--tw-text-opacity, 1))}.hover\:text-white:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.hover\:opacity-90:hover{opacity:0.9}.group:hover .group-hover\:scale-105{--tw-scale-x:1.05;--tw-scale-y:1.05;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes bounce{0%, 100%{transform:translateY(-25%);animation-timing-function:cubic-bezier(0.8,0,1,1)}50%{transform:none;animation-timing-function:cubic-bezier(0,0,0.2,1)}}.group:hover .group-hover\:animate-bounce{animation:bounce 1s infinite}.group:hover .group-hover\:text-neon-pink{--tw-text-opacity:1;color:rgb(255 0 255 / var(--tw-text-opacity, 1))}.group:hover .group-hover\:opacity-100{opacity:1}.group:hover .group-hover\:opacity-40{opacity:0.4}</style></head>
<body class="h-screen w-screen flex flex-col font-body">
<!-- BACKGROUND VISUALS -->
<div class="fixed inset-0 z-0 pointer-events-none opacity-30">
<div class="absolute top-1/4 left-1/4 w-64 h-64 bg-purple-900 rounded-full blur-[100px] animate-pulse"></div>
<div class="absolute bottom-1/4 right-1/4 w-64 h-64 bg-pink-900 rounded-full blur-[100px] animate-pulse" style="animation-delay: 1s;"></div>
</div>
<!-- SETTINGS BUTTON (Top Right) -->
<button class="fixed top-4 right-4 z-50 p-2 text-white hover:text-neon-pink hover:rotate-90 transition-all duration-300" onclick="toggleSettings()">
<span class="material-symbols-outlined text-3xl">settings</span>
</button>
<!-- MAIN CONTAINER -->
<div class="relative z-10 w-full max-w-lg mx-auto h-full flex flex-col p-4">
<!-- HEADER -->
<header class="flex justify-between items-center py-4 border-b border-white/10">
<div class="flex items-center gap-2">
<span class="material-symbols-outlined text-neon-pink">bolt</span>
<h1 class="font-display text-3xl tracking-widest text-white"><span class="text-neon-pink">TWICE</span> SURVIVAL</h1>
</div>
<div class="flex flex-col items-end pr-8"> <!-- Added padding-right to avoid overlap with settings -->
<div class="text-xs text-gray-400 tracking-wider">HIGH SCORE</div>
<div class="font-display text-2xl text-neon-blue" id="high-score">0</div>
</div>
</header>
<!-- SCREENS -->
<!-- 1. MENU SCREEN -->
<div class="flex-1 flex flex-col justify-center items-center space-y-8 animate-fade-in" id="screen-menu">
<div class="relative group cursor-pointer" onclick="startGame()">
<div class="absolute inset-0 bg-neon-pink blur-xl opacity-20 group-hover:opacity-40 transition duration-500 rounded-full"></div>
<div class="relative w-48 h-48 border-4 border-white/20 rounded-full flex items-center justify-center bg-black/50 backdrop-blur-md group-hover:scale-105 transition transform duration-300">
<span class="material-symbols-outlined text-7xl text-white group-hover:text-neon-pink transition">play_arrow</span>
</div>
</div>
<div class="text-center space-y-2">
<h2 class="text-4xl font-display font-bold tracking-widest text-transparent bg-clip-text bg-gradient-to-r from-neon-pink to-neon-blue">TIME ATTACK</h2>
<p class="text-gray-400 text-sm">Correct Answer: <span class="text-neon-blue">+5 Sec</span> | Wrong: <span class="text-red-500">-10 Sec</span></p>
<p class="text-xs text-gray-600 mt-4">⚠️ Sound Required</p>
</div>
<div class="flex flex-col items-center gap-2 hidden" id="loading-indicator">
<div class="flex gap-1">
<div class="w-2 h-2 bg-neon-pink rounded-full animate-bounce"></div>
<div class="w-2 h-2 bg-neon-blue rounded-full animate-bounce" style="animation-delay: 0.1s"></div>
<div class="w-2 h-2 bg-white rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
</div>
<span class="text-xs font-mono text-neon-pink">SYSTEM INITIALIZING...</span>
</div>
</div>
<!-- 2. GAME SCREEN -->
<div class="hidden flex-1 flex flex-col relative" id="screen-game">
<!-- Timer Bar -->
<div class="w-full h-2 bg-gray-800 rounded-full overflow-hidden mt-4 mb-6 relative shadow-[0_0_10px_rgba(255,0,255,0.3)]">
<div class="h-full bg-gradient-to-r from-neon-blue to-neon-pink timer-bar w-full" id="timer-fill"></div>
</div>
<!-- Score & Combo -->
<div class="flex justify-between items-end mb-8 px-2">
<div>
<div class="text-xs text-gray-400 font-mono">SCORE</div>
<div class="text-5xl font-display font-bold text-white" id="current-score">0</div>
</div>
<div class="text-right opacity-0 transition-all duration-300 transform scale-50" id="combo-container">
<div class="text-neon-pink font-display text-4xl font-bold italic" id="combo-count">x1</div>
<div class="text-xs text-neon-blue tracking-widest">COMBO</div>
</div>
</div>
<!-- Visualizer (Placeholder for audio activity) -->
<div class="flex justify-center items-end h-16 gap-1 mb-8 opacity-50" id="visualizer">
<!-- Bars generated by JS -->
<div class="visualizer-bar" style="animation-duration: 0.674247s;"></div><div class="visualizer-bar" style="animation-duration: 0.318917s;"></div><div class="visualizer-bar" style="animation-duration: 0.328739s;"></div><div class="visualizer-bar" style="animation-duration: 0.479544s;"></div><div class="visualizer-bar" style="animation-duration: 0.358629s;"></div><div class="visualizer-bar" style="animation-duration: 0.660965s;"></div><div class="visualizer-bar" style="animation-duration: 0.592816s;"></div><div class="visualizer-bar" style="animation-duration: 0.597608s;"></div><div class="visualizer-bar" style="animation-duration: 0.407286s;"></div><div class="visualizer-bar" style="animation-duration: 0.378051s;"></div><div class="visualizer-bar" style="animation-duration: 0.642201s;"></div><div class="visualizer-bar" style="animation-duration: 0.69369s;"></div></div>
<!-- Question Area -->
<div class="flex-1 flex flex-col justify-end space-y-3 pb-8">
<div class="grid grid-cols-1 gap-3" id="options-container">
<!-- Buttons injected by JS -->
</div>
</div>
<!-- Feedback Overlay -->
<div class="absolute inset-0 flex items-center justify-center pointer-events-none opacity-0 transition-opacity duration-200" id="feedback-overlay">
<div class="text-6xl font-display font-bold text-white drop-shadow-[0_0_10px_rgba(0,0,0,0.8)] transform scale-150" id="feedback-text">PERFECT</div>
</div>
</div>
<!-- 3. GAME OVER SCREEN -->
<div class="hidden flex-1 flex flex-col justify-center items-center text-center space-y-8 animate-fade-in z-20" id="screen-result">
<div>
<h2 class="text-6xl font-display font-bold text-red-500 glitch mb-2" data-text="GAME OVER">GAME OVER</h2>
<p class="text-gray-400">SESSION TERMINATED</p>
</div>
<div class="cyber-panel p-8 rounded-2xl w-full max-w-sm">
<div class="text-sm text-gray-400 mb-1">FINAL SCORE</div>
<div class="text-6xl font-display font-bold text-white mb-4" id="final-score">0</div>
<div class="flex justify-between text-sm border-t border-white/10 pt-4">
<span class="text-gray-400">MAX COMBO</span>
<span class="text-neon-blue font-bold" id="final-combo">0</span>
</div>
<div class="flex justify-between text-sm mt-2">
<span class="text-gray-400">SONGS CLEARED</span>
<span class="text-neon-pink font-bold" id="final-songs">0</span>
</div>
</div>
<button class="group relative px-8 py-4 bg-transparent overflow-hidden rounded-none border border-neon-blue text-white font-display text-xl tracking-widest hover:bg-neon-blue/10 transition-all" onclick="startGame()">
<span class="absolute inset-0 w-full h-full bg-gradient-to-r from-neon-blue/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></span>
               RETRY
            </button>
</div>
</div>
<!-- SETTINGS MODAL -->
<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm" id="settings-modal" onclick="toggleSettings()">
<div class="cyber-panel w-full max-w-sm p-6 rounded-2xl m-4 space-y-6 transform transition-all scale-100" onclick="event.stopPropagation()">
<div class="flex justify-between items-center border-b border-white/10 pb-4">
<h3 class="text-xl font-display tracking-widest text-white">SYSTEM SETTINGS</h3>
<button class="text-gray-400 hover:text-white" onclick="toggleSettings()">
<span class="material-symbols-outlined">close</span>
</button>
</div>
<div class="space-y-4">
<p class="text-sm text-gray-400">アプリのソースコード（HTML/CSS/JS）を一括ダウンロードします。</p>
<button class="w-full py-4 bg-gradient-to-r from-neon-pink to-purple-600 text-white font-bold rounded hover:opacity-90 flex items-center justify-center gap-2 group" onclick="downloadSource()">
<span class="material-symbols-outlined group-hover:animate-bounce">download</span>
                DOWNLOAD SOURCE CODE
            </button>
<p class="text-xs text-gray-600 text-center pt-2">
                filename: twice-survival-app.html
            </p>
</div>
</div>
</div>
<!-- AUDIO ENGINE -->
<audio id="bgm-player" preload="auto"></audio>
<script>
        // --- CONFIGURATION ---
        const searchQueries = [
            "TWICE Like OOH-AHH", "TWICE Do it again", "TWICE Going Crazy", "TWICE Truth", "TWICE Candy Boy", "TWICE Like a Fool", "TWICE CHEER UP", "TWICE Precious Love", "TWICE Touchdown", "TWICE Tuk Tok", "TWICE Woohoo", "TWICE My Headphones on", "TWICE TT", "TWICE 1 TO 10", "TWICE PONYTAIL", "TWICE JELLY JELLY", "TWICE PIT-A-PAT",
            "TWICE NEXT PAGE", "TWICE ONE IN A MILLION", "TWICE KNOCK KNOCK", "TWICE Melting", "TWICE SIGNAL", "TWICE Three Times a Day", "TWICE Only You", "TWICE Hold Me Tight", "TWICE Eye Eye Eyes", "TWICE Someone Like Me", "TWICE One More Time", "TWICE Luv Me", "TWICE LIKEY", "TWICE TURTLE", "TWICE MISSING U", "TWICE WOW", 
            "TWICE FFW", "TWICE DING DONG", "TWICE 24/7", "TWICE LOOK AT ME", "TWICE ROLLIN'", "TWICE LOVE LINE", "TWICE DON'T GIVE UP", "TWICE YOU IN MY HEART", "TWICE JALJAYO GOOD NIGHT", "TWICE Heart Shaker", "TWICE Merry & Happy", "TWICE Candy Pop", "TWICE BRAND NEW GIRL", "TWICE What is Love?", "TWICE SWEET TALKER", "TWICE HO!", 
            "TWICE DEJAVU", "TWICE SAY YES", "TWICE STUCK", "TWICE Wake Me Up", "TWICE Pink Lemonade", "TWICE Dance The Night Away", "TWICE CHILLAX", "TWICE Shot thru the heart", "TWICE I WANT YOU BACK", "TWICE BDZ", "TWICE L.O.V.E", "TWICE Wishing", "TWICE Say it again", "TWICE Be as ONE", "TWICE STAY BY MY SIDE", "TWICE YES or YES", 
            "TWICE SAY YOU LOVE ME", "TWICE LALALA", "TWICE YOUNG & WILD", "TWICE SUNSET", "TWICE AFTER MOON", "TWICE The Best Thing I Ever Did", 
        ];

        // --- STATE ---
        let songDatabase = [];
        let gameActive = false;
        let score = 0;
        let timeLeft = 30;
        let maxTime = 30;
        let combo = 0;
        let maxCombo = 0;
        let songsCleared = 0;
        let currentSong = null;
        let timerInterval = null;
        let timeDeduction = 0.1;

        const audio = document.getElementById('bgm-player');

        // --- INITIALIZATION ---
        (async function init() {
            const storedHigh = localStorage.getItem('twice_survival_high');
            if(storedHigh) document.getElementById('high-score').innerText = storedHigh;
            
            const visContainer = document.getElementById('visualizer');
            for(let i=0; i<12; i++) {
                const bar = document.createElement('div');
                bar.className = 'visualizer-bar';
                bar.style.animationDuration = (0.3 + Math.random() * 0.4) + 's';
                visContainer.appendChild(bar);
            }

            await loadDatabase();
        })();

        async function loadDatabase() {
            const indicator = document.getElementById('loading-indicator');
            indicator.classList.remove('hidden');

            const promises = searchQueries.map((q, i) => fetchSongData(q, i));
            const results = await Promise.all(promises);
            songDatabase = results.filter(item => item !== null);

            indicator.classList.add('hidden');
        }

        function fetchSongData(term, index) {
            return new Promise((resolve) => {
                const script = document.createElement('script');
                const callbackName = `itunesCallback_S_${index}`;
                const query = encodeURIComponent(term);
                script.src = `https://itunes.apple.com/search?term=${query}&media=music&entity=song&limit=1&callback=${callbackName}`;
                window[callbackName] = (data) => {
                    delete window[callbackName];
                    document.body.removeChild(script);
                    if (data.results && data.results.length > 0) {
                        const track = data.results[0];
                        resolve({
                            id: track.trackId,
                            title: track.trackName,
                            previewUrl: track.previewUrl,
                        });
                    } else {
                        resolve(null);
                    }
                };
                script.onerror = () => resolve(null);
                document.body.appendChild(script);
            });
        }

        // --- SYSTEM FUNCTIONS ---
        function toggleSettings() {
            const modal = document.getElementById('settings-modal');
            modal.classList.toggle('hidden');
        }

        function downloadSource() {
            // Get the entire HTML of the current document
            const htmlContent = document.documentElement.outerHTML;
            
            // Create a Blob
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            
            // Create temporary link and trigger download
            const a = document.createElement('a');
            a.href = url;
            a.download = 'twice-survival-app.html';
            document.body.appendChild(a);
            a.click();
            
            // Cleanup
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            // Close modal
            toggleSettings();
        }

        // --- GAME LOGIC ---

        function startGame() {
            if (songDatabase.length < 10) {
                alert("Loading music data... Please wait a moment.");
                return;
            }

            score = 0;
            combo = 0;
            maxCombo = 0;
            songsCleared = 0;
            timeLeft = 30; 
            gameActive = true;

            document.getElementById('screen-menu').classList.add('hidden');
            document.getElementById('screen-result').classList.add('hidden');
            document.getElementById('screen-game').classList.remove('hidden');
            updateHUD();

            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(gameLoop, 100);

            nextRound();
        }

        function gameLoop() {
            if (!gameActive) return;

            timeLeft -= timeDeduction;
            updateTimerBar();

            if (timeLeft <= 0) {
                gameOver();
            }
        }

        function updateTimerBar() {
            const fill = document.getElementById('timer-fill');
            const pct = (timeLeft / maxTime) * 100;
            fill.style.width = `${Math.max(0, Math.min(100, pct))}%`;

            if (timeLeft < 5) {
                fill.className = 'h-full w-full bg-red-500 animate-pulse';
            } else if (timeLeft < 10) {
                fill.className = 'h-full w-full bg-yellow-400';
            } else {
                fill.className = 'h-full w-full bg-gradient-to-r from-neon-blue to-neon-pink';
            }
        }

        function nextRound() {
            if (!gameActive) return;

            currentSong = songDatabase[Math.floor(Math.random() * songDatabase.length)];
            
            let distractors = songDatabase.filter(s => s.id !== currentSong.id);
            for (let i = distractors.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [distractors[i], distractors[j]] = [distractors[j], distractors[i]];
            }
            distractors = distractors.slice(0, 3);
            
            let options = [currentSong, ...distractors];
            for (let i = options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [options[i], options[j]] = [options[j], options[i]];
            }

            audio.src = currentSong.previewUrl;
            audio.currentTime = 0;
            audio.play().catch(e => console.log("Audio play error", e));

            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            options.forEach(opt => {
                const btn = document.createElement('button');
                const title = opt.title.replace(/\(.*\)/, '').replace(/ - .*/, '').trim();
                
                btn.className = "cyber-panel w-full py-4 px-6 text-left text-white font-body font-bold text-lg hover:bg-neon-pink/20 hover:border-neon-pink transition-all active:scale-95 flex items-center justify-between group";
                btn.innerHTML = `
                    <span>${title}</span>
                    <span class="material-symbols-outlined opacity-0 group-hover:opacity-100 text-neon-pink transition-opacity">chevron_right</span>
                `;
                btn.onclick = () => handleAnswer(opt.id, btn);
                container.appendChild(btn);
            });
        }

        function handleAnswer(selectedId, btn) {
            if (!gameActive) return;

            const isCorrect = selectedId === currentSong.id;

            if (isCorrect) {
                const timeBonus = 5;
                timeLeft = Math.min(maxTime, timeLeft + timeBonus);
                combo++;
                if (combo > maxCombo) maxCombo = combo;
                songsCleared++;
                
                const roundScore = 100 + (combo * 10) + Math.floor(timeLeft);
                score += roundScore;

                showFeedback("GOOD!", "text-neon-blue");
                
                btn.classList.remove('hover:bg-neon-pink/20');
                btn.style.backgroundColor = 'rgba(0, 255, 255, 0.3)';
                btn.style.borderColor = '#00FFFF';

                updateHUD();
                setTimeout(nextRound, 200);

            } else {
                timeLeft -= 10;
                combo = 0;
                
                showFeedback("MISS", "text-red-500");
                
                btn.style.backgroundColor = 'rgba(255, 0, 0, 0.3)';
                btn.style.borderColor = '#FF0000';
                
                document.body.classList.add('animate-shake');
                setTimeout(() => document.body.classList.remove('animate-shake'), 500);

                updateHUD();
                updateTimerBar();
                setTimeout(nextRound, 500);
            }
        }

        function updateHUD() {
            document.getElementById('current-score').innerText = score;
            
            const comboContainer = document.getElementById('combo-container');
            if (combo > 1) {
                document.getElementById('combo-count').innerText = `x${combo}`;
                comboContainer.classList.remove('opacity-0', 'scale-50');
                comboContainer.classList.add('scale-100');
                comboContainer.classList.remove('animate-pulse-fast');
                void comboContainer.offsetWidth;
                comboContainer.classList.add('animate-pulse-fast');
            } else {
                comboContainer.classList.add('opacity-0', 'scale-50');
            }
        }

        function showFeedback(text, colorClass) {
            const overlay = document.getElementById('feedback-overlay');
            const txt = document.getElementById('feedback-text');
            txt.innerText = text;
            txt.className = `text-6xl font-display font-bold drop-shadow-[0_0_10px_rgba(0,0,0,0.8)] transform scale-150 ${colorClass}`;
            
            overlay.classList.remove('opacity-0');
            setTimeout(() => overlay.classList.add('opacity-0'), 500);
        }

        function gameOver() {
            gameActive = false;
            clearInterval(timerInterval);
            audio.pause();

            document.getElementById('screen-game').classList.add('hidden');
            document.getElementById('screen-result').classList.remove('hidden');

            document.getElementById('final-score').innerText = score;
            document.getElementById('final-combo').innerText = maxCombo;
            document.getElementById('final-songs').innerText = songsCleared;

            const currentHigh = localStorage.getItem('twice_survival_high') || 0;
            if (score > currentHigh) {
                localStorage.setItem('twice_survival_high', score);
                document.getElementById('high-score').innerText = score;
            }
        }

    </script>

</body></html>
